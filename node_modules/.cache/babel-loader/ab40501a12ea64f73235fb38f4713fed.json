{"ast":null,"code":"var _jsxFileName = \"/Users/lijinxing/Documents/hipo-dapp-bamboo/src/wallet/WalletProvider.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { UnsupportedChainIdError, useWeb3React, Web3ReactProvider } from \"@web3-react/core\";\nimport { NoEthereumProviderError, UserRejectedRequestError } from \"@web3-react/injected-connector\";\nimport BigNumber from \"bignumber.js\";\nimport { ethers } from \"ethers\";\nimport { createContext, useCallback, useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useSessionStorage } from \"react-use-storage\";\nimport Web3 from \"web3\";\nimport EventEmitter from \"wolfy87-eventemitter\";\nimport { useChain } from \"../chain/ChainProvider\";\n// import Modal from \"../components/modal/Modal\";\nimport InstallMetamaskModal from \"./components/install-metamask-modal/InstallMetamaskModal\";\n// import SelectWalletModal from \"./components/select-wallet-modal/SelectWalletModal\";\n// import SwitchChainModal from \"./components/switch-chain-modal/SwitchChainModal\";\nimport MetamaskWalletConfig from \"./connectors/metamask/MetamaskConnector\";\n\n/* \n  Create wallet hook: useWallet() \n*/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/createContext();\nexport function useWallet() {\n  _s();\n  return useContext(Context);\n}\n\n/* \n  Add other wallet connector \n*/\n_s(useWallet, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const WalletConnectors = [MetamaskWalletConfig];\nconst Web3WalletProvider = props => {\n  _s2();\n  var _web3React$account;\n  const {\n    children\n  } = props;\n  const {\n    activeChain\n  } = useChain();\n  const web3React = useWeb3React();\n  const [sessionProvider, setSessionProvider, removeSessionProvider] = useSessionStorage('wallet_provider');\n  const event = useMemo(() => new EventEmitter(), []);\n  const [connecting, setConnecting] = useState();\n  const [initialized, setInitialized] = useState(false);\n  const connectingRef = useRef(connecting);\n\n  /* \n    TODO: Test: Is it possible to remove this line \n  */\n\n  connectingRef.current = connecting;\n  const [activeMeta, setActiveMeta] = useState();\n\n  /* \n    Account states \n  */\n\n  const [ethBalance, setEthBalance] = useState();\n  const [ensName, setENSName] = useState();\n  const [ensAvatar, setENSAvatar] = useState();\n\n  /* \n    Modal controllers \n  */\n\n  // const [connectWalletModal, setConnectWalletModal] = useState(false);\n  const [installMetaMaskModal, setInstallMetaMaskModal] = useState(false);\n  // const [unsupportedChainModal, setUnsupportedChainModal] = useState(false);\n  // const [userRejectedModal, setUserRejectedModal] = useState(false);\n\n  /* \n    \n  */\n\n  const preConnectedAccount = useRef(web3React.account);\n  if (preConnectedAccount.current !== web3React.account) {\n    preConnectedAccount.current = web3React.account;\n    event.emit('UPDATE_ACCOUNT', web3React.account);\n  }\n\n  /* \n    Disconnect wallet handler \n  */\n\n  const disconnect = useCallback(() => {\n    var _activeMeta$onDisconn;\n    web3React.deactivate();\n    activeMeta === null || activeMeta === void 0 ? void 0 : (_activeMeta$onDisconn = activeMeta.onDisconnect) === null || _activeMeta$onDisconn === void 0 ? void 0 : _activeMeta$onDisconn.call(activeMeta, web3React.connector);\n    setConnecting(undefined);\n    setActiveMeta(undefined);\n    setEthBalance(undefined);\n    removeSessionProvider();\n  }, [web3React, activeMeta, removeSessionProvider, setConnecting, setActiveMeta, setEthBalance]);\n\n  /* \n    Connect wallet handler \n  */\n\n  const connect = useCallback(async walletConfig => {\n    /* The status of connecting */\n\n    if (connectingRef.current) {\n      return;\n    }\n    connectingRef.current = walletConfig;\n    setConnecting(walletConfig);\n\n    // setConnectWalletModal(false);\n    // setInstallMetaMaskModal(false);\n    // setUnsupportedChainModal(false);\n    // setUserRejectedModal(false);\n\n    const connector = walletConfig.factory(activeChain);\n\n    /* Errors handlers: \n    /* No wallet available, \n    /* unsupported chain, \n    /* user rejected connection request, \n    /* and other errors. */\n\n    function onError(error) {\n      if (error instanceof NoEthereumProviderError) {\n        setInstallMetaMaskModal(true);\n        disconnect();\n      } else if (error instanceof UnsupportedChainIdError) {\n        // setUnsupportedChainModal(true)\n        disconnect();\n      } else if (error instanceof UserRejectedRequestError) {\n        // setUserRejectedModal(true)\n        disconnect();\n      } else {\n        var _walletConfig$onError;\n        const err = (_walletConfig$onError = walletConfig.onError) === null || _walletConfig$onError === void 0 ? void 0 : _walletConfig$onError.call(walletConfig, error);\n        if (err) {\n          console.log(err.message);\n        }\n        disconnect();\n      }\n    }\n    function onSuccess() {\n      var _walletConfig$onConne;\n      if (!connectingRef.current) {\n        return;\n      }\n      (_walletConfig$onConne = walletConfig.onConnect) === null || _walletConfig$onConne === void 0 ? void 0 : _walletConfig$onConne.call(walletConfig, connector);\n      setActiveMeta(walletConfig);\n      setSessionProvider(walletConfig.id);\n    }\n    await web3React.activate(connector, undefined, true).then(onSuccess).catch(onError);\n    setConnecting(undefined);\n\n    // try {\n\n    //   const currentProviderChainId = await connector.getChainId()\n\n    //   if(currentProviderChainId === activeNetwork.metamaskChain.chainId) {\n    //     await web3React.activate(connector, undefined, true)\n    //       .then(onSuccess)\n    //       .catch(onError)\n    //   } else {\n    //     setUnsupportedChainModal(true);\n    //   }\n\n    //   setConnecting(undefined);\n\n    // } catch(error) {\n    //   if(error instanceof NoEthereumProviderError) {\n    //     setInstallMetaMaskModal(true)\n    //     disconnect()\n    //   }\n    // }       \n  }, [web3React, connectingRef, setConnecting, setSessionProvider, activeChain, disconnect]);\n  const changeChain = async setError => {\n    try {\n      if (!window.ethereum) throw new Error(\"No crypto wallet found\");\n      if (activeChain.meta.chainId === 1 || activeChain.meta.chainId === 5) {\n        await window.ethereum.request({\n          method: \"wallet_switchEthereumChain\",\n          params: [{\n            \"chainId\": `0x${Number(activeChain.meta.chainId).toString(16)}`\n          }]\n        });\n      } else {\n        await window.ethereum.request({\n          method: \"wallet_addEthereumChain\",\n          params: [{\n            \"chainId\": `0x${Number(activeChain.meta.chainId).toString(16)}`\n          }]\n        });\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  /* \n    Use effect to update the account states \n  */\n\n  useEffect(() => {\n    /* Reset account states to undefined */\n\n    setEthBalance(undefined);\n    setENSName(undefined);\n    setENSAvatar(undefined);\n    const account = web3React.account;\n    if (account && Web3.utils.isAddress(account)) {\n      const ethWeb3 = new Web3(web3React.library);\n\n      /* Balance of the account */\n\n      ethWeb3.eth.getBalance(account).then(value => {\n        setEthBalance(value ? new BigNumber(value) : undefined);\n      }).catch(Error);\n\n      /* ENS name and avatar of the account */\n\n      const provider = new ethers.providers.JsonRpcProvider(activeChain.rpc.httpsUrl);\n      provider.lookupAddress(account).then(value => {\n        setENSName(value !== null && value !== void 0 ? value : undefined);\n        if (value) {\n          provider.getAvatar(value !== null && value !== void 0 ? value : '').then(value => {\n            setENSAvatar(value !== null && value !== void 0 ? value : undefined);\n          }).catch(Error);\n        }\n      }).catch(Error);\n    }\n  }, [web3React.account, activeChain, web3React.library]);\n\n  /* \n    Accroding to session to restore states of the account \n  */\n\n  useEffect(() => {\n    (async () => {\n      if (sessionProvider) {\n        const walletConnector = WalletConnectors.find(conn => conn.id === sessionProvider);\n        if (walletConnector) {\n          await connect(walletConnector);\n        }\n      }\n      setInitialized(true);\n    })();\n  }, []);\n  const value = {\n    initialized,\n    connecting,\n    isActive: web3React.active,\n    account: (_web3React$account = web3React.account) !== null && _web3React$account !== void 0 ? _web3React$account : undefined,\n    meta: activeMeta,\n    connector: web3React.connector,\n    provider: web3React.library,\n    ethBalance,\n    connect,\n    disconnect,\n    showWalletsModal: () => {\n      // setConnectWalletModal(true);\n    },\n    showSwichChainModal: () => {\n      // setUnsupportedChainModal(false);\n    },\n    changeChain,\n    event,\n    ens: {\n      name: ensName,\n      avatar: ensAvatar\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: value,\n    children: [children, installMetaMaskModal && /*#__PURE__*/_jsxDEV(InstallMetamaskModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 33\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 5\n  }, this);\n};\n_s2(Web3WalletProvider, \"F92tDxTXaesD6/Z9Pk7SeWOj6EM=\", false, function () {\n  return [useChain, useWeb3React, useSessionStorage];\n});\n_c = Web3WalletProvider;\nconst WalletProvider = props => {\n  const {\n    children\n  } = props;\n  return /*#__PURE__*/_jsxDEV(Web3ReactProvider, {\n    getLibrary: library => library,\n    children: /*#__PURE__*/_jsxDEV(Web3WalletProvider, {\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this);\n};\n_c2 = WalletProvider;\nexport default WalletProvider;\nvar _c, _c2;\n$RefreshReg$(_c, \"Web3WalletProvider\");\n$RefreshReg$(_c2, \"WalletProvider\");","map":{"version":3,"names":["UnsupportedChainIdError","useWeb3React","Web3ReactProvider","NoEthereumProviderError","UserRejectedRequestError","BigNumber","ethers","createContext","useCallback","useContext","useEffect","useMemo","useRef","useState","useSessionStorage","Web3","EventEmitter","useChain","InstallMetamaskModal","MetamaskWalletConfig","jsxDEV","_jsxDEV","Context","useWallet","_s","WalletConnectors","Web3WalletProvider","props","_s2","_web3React$account","children","activeChain","web3React","sessionProvider","setSessionProvider","removeSessionProvider","event","connecting","setConnecting","initialized","setInitialized","connectingRef","current","activeMeta","setActiveMeta","ethBalance","setEthBalance","ensName","setENSName","ensAvatar","setENSAvatar","installMetaMaskModal","setInstallMetaMaskModal","preConnectedAccount","account","emit","disconnect","_activeMeta$onDisconn","deactivate","onDisconnect","call","connector","undefined","connect","walletConfig","factory","onError","error","_walletConfig$onError","err","console","log","message","onSuccess","_walletConfig$onConne","onConnect","id","activate","then","catch","changeChain","setError","window","ethereum","Error","meta","chainId","request","method","params","Number","toString","utils","isAddress","ethWeb3","library","eth","getBalance","value","provider","providers","JsonRpcProvider","rpc","httpsUrl","lookupAddress","getAvatar","walletConnector","find","conn","isActive","active","showWalletsModal","showSwichChainModal","ens","name","avatar","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","WalletProvider","getLibrary","_c2","$RefreshReg$"],"sources":["/Users/lijinxing/Documents/hipo-dapp-bamboo/src/wallet/WalletProvider.jsx"],"sourcesContent":["import { UnsupportedChainIdError, useWeb3React, Web3ReactProvider } from \"@web3-react/core\";\nimport { NoEthereumProviderError, UserRejectedRequestError } from \"@web3-react/injected-connector\";\nimport BigNumber from \"bignumber.js\";\nimport { ethers } from \"ethers\";\nimport { createContext, useCallback, useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useSessionStorage } from \"react-use-storage\";\nimport Web3 from \"web3\";\nimport EventEmitter from \"wolfy87-eventemitter\";\nimport { useChain } from \"../chain/ChainProvider\";\n// import Modal from \"../components/modal/Modal\";\nimport InstallMetamaskModal from \"./components/install-metamask-modal/InstallMetamaskModal\";\n// import SelectWalletModal from \"./components/select-wallet-modal/SelectWalletModal\";\n// import SwitchChainModal from \"./components/switch-chain-modal/SwitchChainModal\";\nimport MetamaskWalletConfig from \"./connectors/metamask/MetamaskConnector\";\n\n/* \n  Create wallet hook: useWallet() \n*/\n\nconst Context = createContext();\n\nexport function useWallet() {\n  return useContext(Context);\n}\n\n/* \n  Add other wallet connector \n*/\n\nexport const WalletConnectors = [\n  MetamaskWalletConfig,\n];\n\nconst Web3WalletProvider = props => {\n\n  const { children } = props;\n  const { activeChain } = useChain();\n  const web3React = useWeb3React();\n\n  const [sessionProvider, setSessionProvider, removeSessionProvider] = useSessionStorage('wallet_provider');\n  const event = useMemo(() => new EventEmitter(), [])\n  const [connecting, setConnecting] = useState();\n  const [initialized, setInitialized] = useState(false);\n  const connectingRef = useRef(connecting);\n\n  /* \n    TODO: Test: Is it possible to remove this line \n  */\n\n  connectingRef.current = connecting;\n  const [activeMeta, setActiveMeta] = useState();\n\n  /* \n    Account states \n  */\n\n  const [ethBalance, setEthBalance] = useState();\n  const [ensName, setENSName] = useState();\n  const [ensAvatar, setENSAvatar]= useState();\n\n  /* \n    Modal controllers \n  */\n\n  // const [connectWalletModal, setConnectWalletModal] = useState(false);\n  const [installMetaMaskModal, setInstallMetaMaskModal] = useState(false);\n  // const [unsupportedChainModal, setUnsupportedChainModal] = useState(false);\n  // const [userRejectedModal, setUserRejectedModal] = useState(false);\n\n  /* \n    \n  */\n\n  const preConnectedAccount = useRef(web3React.account)\n  if (preConnectedAccount.current !== web3React.account) {\n    preConnectedAccount.current = web3React.account\n    event.emit('UPDATE_ACCOUNT', web3React.account)\n  }\n\n  /* \n    Disconnect wallet handler \n  */\n\n  const disconnect = useCallback(() => {\n    web3React.deactivate()\n    activeMeta?.onDisconnect?.(web3React.connector)\n    setConnecting(undefined)\n    setActiveMeta(undefined)\n    setEthBalance(undefined)\n    removeSessionProvider()\n  }, [web3React, activeMeta, removeSessionProvider, setConnecting, setActiveMeta, setEthBalance])\n\n  /* \n    Connect wallet handler \n  */\n\n  const connect = useCallback(\n    async (walletConfig) => {\n\n      /* The status of connecting */\n\n      if(connectingRef.current) {\n        return\n      }\n\n      connectingRef.current = walletConfig\n      setConnecting(walletConfig);\n\n      // setConnectWalletModal(false);\n      // setInstallMetaMaskModal(false);\n      // setUnsupportedChainModal(false);\n      // setUserRejectedModal(false);\n\n      const connector = walletConfig.factory(activeChain);\n\n      /* Errors handlers: \n      /* No wallet available, \n      /* unsupported chain, \n      /* user rejected connection request, \n      /* and other errors. */\n      \n      function onError(error) {\n        if(error instanceof NoEthereumProviderError) {\n          setInstallMetaMaskModal(true)\n          disconnect()\n        } else if(error instanceof UnsupportedChainIdError) {\n          // setUnsupportedChainModal(true)\n          disconnect()\n        } else if(error instanceof UserRejectedRequestError) {\n          // setUserRejectedModal(true)\n          disconnect()\n        } else {\n          const err = walletConfig.onError?.(error)\n          \n          if(err) {\n            console.log(err.message);\n          }\n          disconnect()\n        }\n      }\n\n      function onSuccess() {\n        if (!connectingRef.current) {\n          return\n        }\n\n        walletConfig.onConnect?.(connector)\n        setActiveMeta(walletConfig)\n        setSessionProvider(walletConfig.id)\n      }\n\n      await web3React.activate(connector, undefined, true).then(onSuccess).catch(onError)\n      setConnecting(undefined)\n\n      // try {\n        \n      //   const currentProviderChainId = await connector.getChainId()\n        \n      //   if(currentProviderChainId === activeNetwork.metamaskChain.chainId) {\n      //     await web3React.activate(connector, undefined, true)\n      //       .then(onSuccess)\n      //       .catch(onError)\n      //   } else {\n      //     setUnsupportedChainModal(true);\n      //   }\n        \n      //   setConnecting(undefined);\n\n      // } catch(error) {\n      //   if(error instanceof NoEthereumProviderError) {\n      //     setInstallMetaMaskModal(true)\n      //     disconnect()\n      //   }\n      // }       \n    },\n    [web3React, connectingRef, setConnecting, setSessionProvider, activeChain, disconnect],\n  )\n\n  const changeChain = async (setError) => {\n    try {\n      if (!window.ethereum) throw new Error(\"No crypto wallet found\");\n\n      if (activeChain.meta.chainId === 1 || activeChain.meta.chainId === 5) {\n        await window.ethereum.request({\n          method: \"wallet_switchEthereumChain\",\n          params: [\n            {\n              \"chainId\": `0x${Number(activeChain.meta.chainId).toString(16)}`,\n            }\n          ]\n        });\n      } else {\n        await window.ethereum.request({\n          method: \"wallet_addEthereumChain\",          \n          params: [\n            {\n              \"chainId\": `0x${Number(activeChain.meta.chainId).toString(16)}`,\n            }\n          ]\n        });\n      }\n      \n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  /* \n    Use effect to update the account states \n  */\n\n  useEffect(() => {\n\n    /* Reset account states to undefined */\n\n    setEthBalance(undefined);\n    setENSName(undefined);\n    setENSAvatar(undefined);\n\n    const account = web3React.account;\n\n    if(account && Web3.utils.isAddress(account)) {\n      const ethWeb3 = new Web3(web3React.library);\n\n      /* Balance of the account */\n\n      ethWeb3.eth\n        .getBalance(account)\n        .then(value => {\n          setEthBalance(value ? new BigNumber(value) : undefined);\n        })\n        .catch(Error);\n      \n      /* ENS name and avatar of the account */\n\n      const provider = new ethers.providers.JsonRpcProvider(activeChain.rpc.httpsUrl);\n      provider\n        .lookupAddress(account)\n        .then(value => {\n          setENSName(value ?? undefined);\n          if(value) {\n            provider\n              .getAvatar(value ?? '')\n              .then(value => {\n                setENSAvatar(value ?? undefined);\n              })\n              .catch(Error);\n          }\n        })\n        .catch(Error)\n    }\n  }, [web3React.account, activeChain, web3React.library])\n\n  /* \n    Accroding to session to restore states of the account \n  */\n  \n  useEffect(() => {\n    (async () => {\n      if(sessionProvider) {\n        const walletConnector = WalletConnectors.find(conn => conn.id === sessionProvider);\n\n        if(walletConnector) {\n          await connect(walletConnector)\n        }\n      }\n      setInitialized(true);\n    })()\n  },[])\n\n  const value = {\n    initialized,\n    connecting,\n    isActive: web3React.active,\n    account: web3React.account ?? undefined,\n    meta: activeMeta,\n    connector: web3React.connector,\n    provider: web3React.library,\n    ethBalance,\n    connect,\n    disconnect,\n    showWalletsModal: () => {\n      // setConnectWalletModal(true);\n    },\n    showSwichChainModal: () => {\n      // setUnsupportedChainModal(false);\n    },\n    changeChain,\n    event,\n    ens: {\n      name: ensName,\n      avatar: ensAvatar,\n    }\n  }\n\n  return (\n    <Context.Provider value={value}>\n      { children }\n      {/* { connectWalletModal && <SelectWalletModal /> }\n      { userRejectedModal && <Modal />}\n      { unsupportedChainModal && <SwitchChainModal />} */}\n      { installMetaMaskModal && <InstallMetamaskModal />}\n    </Context.Provider>\n  )\n}\n\nconst WalletProvider = props => {\n\n  const { children } = props\n\n  return (\n    <Web3ReactProvider getLibrary={library => library}>\n      <Web3WalletProvider>\n        { children }\n      </Web3WalletProvider>\n    </Web3ReactProvider>\n  )\n}\n\nexport default WalletProvider\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}