{"ast":null,"code":"import { useState, useCallback, useEffect } from 'react';\nimport { useFreshCallback } from './useFreshCallback.js';\nimport { useTimeoutWhen } from './useTimeoutWhen.js';\nconst defaultOnClick = () => {};\nconst useOnLongPress = function (callback) {\n  let {\n    onClick,\n    duration = 300\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const [targetNode, setTargetNode] = useState(null);\n  const ref = useCallback(node => {\n    setTargetNode(node);\n  }, []);\n  const [isPressing, setIsPressing] = useState(false);\n  const freshCallback = useFreshCallback(callback);\n  const freshClick = useFreshCallback(onClick !== null && onClick !== void 0 ? onClick : defaultOnClick);\n  useTimeoutWhen(freshCallback, duration, isPressing);\n  const start = useCallback(_ => {\n    setIsPressing(true);\n  }, []);\n  const handleOnClick = useCallback(event => {\n    setIsPressing(false);\n    freshClick(event);\n  }, [freshClick]);\n  useEffect(() => {\n    if (targetNode) {\n      targetNode.addEventListener(\"mousedown\", start);\n      targetNode.addEventListener(\"mouseup\", handleOnClick);\n      targetNode.addEventListener(\"mouseleave\", handleOnClick);\n      targetNode.addEventListener(\"touchstart\", start);\n      targetNode.addEventListener(\"touchend\", handleOnClick);\n      targetNode.addEventListener(\"touchcancel\", handleOnClick);\n    }\n    return () => {\n      if (targetNode) {\n        targetNode.removeEventListener(\"mousedown\", start);\n        targetNode.removeEventListener(\"mouseup\", handleOnClick);\n        targetNode.removeEventListener(\"mouseleave\", handleOnClick);\n        targetNode.removeEventListener(\"touchstart\", start);\n        targetNode.removeEventListener(\"touchend\", handleOnClick);\n        targetNode.removeEventListener(\"touchcancel\", handleOnClick);\n      }\n    };\n  }, [start, handleOnClick, targetNode]);\n  // clone ref\n  return ref;\n};\nexport { useOnLongPress };","map":{"version":3,"names":["useState","useCallback","useEffect","useFreshCallback","useTimeoutWhen","defaultOnClick","useOnLongPress","callback","onClick","duration","arguments","length","undefined","targetNode","setTargetNode","ref","node","isPressing","setIsPressing","freshCallback","freshClick","start","_","handleOnClick","event","addEventListener","removeEventListener"],"sources":["/Users/lijinxing/Documents/hipo-dapp-bamboo/node_modules/rooks/dist/esm/hooks/useOnLongPress.js"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\nimport { useFreshCallback } from './useFreshCallback.js';\nimport { useTimeoutWhen } from './useTimeoutWhen.js';\n\nconst defaultOnClick = () => { };\r\nconst useOnLongPress = (callback, { onClick, duration = 300 } = {}) => {\r\n    const [targetNode, setTargetNode] = useState(null);\r\n    const ref = useCallback((node) => {\r\n        setTargetNode(node);\r\n    }, []);\r\n    const [isPressing, setIsPressing] = useState(false);\r\n    const freshCallback = useFreshCallback(callback);\r\n    const freshClick = useFreshCallback(onClick !== null && onClick !== void 0 ? onClick : defaultOnClick);\r\n    useTimeoutWhen(freshCallback, duration, isPressing);\r\n    const start = useCallback((_) => {\r\n        setIsPressing(true);\r\n    }, []);\r\n    const handleOnClick = useCallback((event) => {\r\n        setIsPressing(false);\r\n        freshClick(event);\r\n    }, [freshClick]);\r\n    useEffect(() => {\r\n        if (targetNode) {\r\n            targetNode.addEventListener(\"mousedown\", start);\r\n            targetNode.addEventListener(\"mouseup\", handleOnClick);\r\n            targetNode.addEventListener(\"mouseleave\", handleOnClick);\r\n            targetNode.addEventListener(\"touchstart\", start);\r\n            targetNode.addEventListener(\"touchend\", handleOnClick);\r\n            targetNode.addEventListener(\"touchcancel\", handleOnClick);\r\n        }\r\n        return () => {\r\n            if (targetNode) {\r\n                targetNode.removeEventListener(\"mousedown\", start);\r\n                targetNode.removeEventListener(\"mouseup\", handleOnClick);\r\n                targetNode.removeEventListener(\"mouseleave\", handleOnClick);\r\n                targetNode.removeEventListener(\"touchstart\", start);\r\n                targetNode.removeEventListener(\"touchend\", handleOnClick);\r\n                targetNode.removeEventListener(\"touchcancel\", handleOnClick);\r\n            }\r\n        };\r\n    }, [start, handleOnClick, targetNode]);\r\n    // clone ref\r\n    return ref;\r\n};\n\nexport { useOnLongPress };\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AACxD,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,cAAc,QAAQ,qBAAqB;AAEpD,MAAMC,cAAc,GAAGA,CAAA,KAAM,CAAE,CAAC;AAChC,MAAMC,cAAc,GAAG,SAAAA,CAACC,QAAQ,EAAuC;EAAA,IAArC;IAAEC,OAAO;IAAEC,QAAQ,GAAG;EAAI,CAAC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAC9D,MAAM,CAACG,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAMe,GAAG,GAAGd,WAAW,CAAEe,IAAI,IAAK;IAC9BF,aAAa,CAACE,IAAI,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;EACN,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMmB,aAAa,GAAGhB,gBAAgB,CAACI,QAAQ,CAAC;EAChD,MAAMa,UAAU,GAAGjB,gBAAgB,CAACK,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAGA,OAAO,GAAGH,cAAc,CAAC;EACtGD,cAAc,CAACe,aAAa,EAAEV,QAAQ,EAAEQ,UAAU,CAAC;EACnD,MAAMI,KAAK,GAAGpB,WAAW,CAAEqB,CAAC,IAAK;IAC7BJ,aAAa,CAAC,IAAI,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;EACN,MAAMK,aAAa,GAAGtB,WAAW,CAAEuB,KAAK,IAAK;IACzCN,aAAa,CAAC,KAAK,CAAC;IACpBE,UAAU,CAACI,KAAK,CAAC;EACrB,CAAC,EAAE,CAACJ,UAAU,CAAC,CAAC;EAChBlB,SAAS,CAAC,MAAM;IACZ,IAAIW,UAAU,EAAE;MACZA,UAAU,CAACY,gBAAgB,CAAC,WAAW,EAAEJ,KAAK,CAAC;MAC/CR,UAAU,CAACY,gBAAgB,CAAC,SAAS,EAAEF,aAAa,CAAC;MACrDV,UAAU,CAACY,gBAAgB,CAAC,YAAY,EAAEF,aAAa,CAAC;MACxDV,UAAU,CAACY,gBAAgB,CAAC,YAAY,EAAEJ,KAAK,CAAC;MAChDR,UAAU,CAACY,gBAAgB,CAAC,UAAU,EAAEF,aAAa,CAAC;MACtDV,UAAU,CAACY,gBAAgB,CAAC,aAAa,EAAEF,aAAa,CAAC;IAC7D;IACA,OAAO,MAAM;MACT,IAAIV,UAAU,EAAE;QACZA,UAAU,CAACa,mBAAmB,CAAC,WAAW,EAAEL,KAAK,CAAC;QAClDR,UAAU,CAACa,mBAAmB,CAAC,SAAS,EAAEH,aAAa,CAAC;QACxDV,UAAU,CAACa,mBAAmB,CAAC,YAAY,EAAEH,aAAa,CAAC;QAC3DV,UAAU,CAACa,mBAAmB,CAAC,YAAY,EAAEL,KAAK,CAAC;QACnDR,UAAU,CAACa,mBAAmB,CAAC,UAAU,EAAEH,aAAa,CAAC;QACzDV,UAAU,CAACa,mBAAmB,CAAC,aAAa,EAAEH,aAAa,CAAC;MAChE;IACJ,CAAC;EACL,CAAC,EAAE,CAACF,KAAK,EAAEE,aAAa,EAAEV,UAAU,CAAC,CAAC;EACtC;EACA,OAAOE,GAAG;AACd,CAAC;AAED,SAAST,cAAc"},"metadata":{},"sourceType":"module"}