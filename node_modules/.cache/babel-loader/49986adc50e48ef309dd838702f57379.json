{"ast":null,"code":"var _jsxFileName = \"/Users/lijinxing/Documents/hipo-dapp-bamboo/src/layout/components/general-provider/GeneralProvider.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useContext, useState, useEffect, createContext } from \"react\";\nimport { useLocalStorage } from \"react-use-storage\";\nimport { useWindowEventListener } from \"rooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/createContext();\nconst mqlDark = window.matchMedia('(prefers-color-scheme: dark)');\nconst defaultTheme = mqlDark.matches ? 'dark' : 'light';\nexport function useGeneral() {\n  _s();\n  return useContext(Context);\n}\n_s(useGeneral, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst GeneralProvider = props => {\n  _s2();\n  const [navOpen, setNavOpen] = useState(false);\n  const [visibilityState, setVisibilityState] = useState(window.document.visibilityState);\n  const [osColorScheme, setOsColorScheme] = useState(defaultTheme);\n  const [selectedTheme, setSelectedTheme, removeSelectedTheme] = useLocalStorage('bb_theme');\n  const theme = selectedTheme || osColorScheme;\n  useWindowEventListener('visibilitychange', () => {\n    setVisibilityState(window.document.visibilityState);\n  });\n  useEffect(() => {\n    setOsColorScheme(defaultTheme);\n    mqlDark.addEventListener('change', e => {\n      setOsColorScheme(e.matches ? 'dark' : 'light');\n    });\n  }, []);\n  function toggleTheme() {\n    if (selectedTheme === 'light') {\n      setSelectedTheme('dark');\n    } else if (selectedTheme === 'dark') {\n      removeSelectedTheme();\n    } else {\n      selectedTheme('light');\n    }\n  }\n  const value = {\n    navOpen,\n    setNavOpen,\n    theme,\n    selectedTheme,\n    toggleTheme,\n    windowState: {\n      visibilityState,\n      isVisible: visibilityState === 'visible'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s2(GeneralProvider, \"kKl96Wxu7OsWZxL45S53smD1cxg=\", false, function () {\n  return [useLocalStorage, useWindowEventListener];\n});\n_c = GeneralProvider;\nexport default GeneralProvider;\nvar _c;\n$RefreshReg$(_c, \"GeneralProvider\");","map":{"version":3,"names":["useContext","useState","useEffect","createContext","useLocalStorage","useWindowEventListener","jsxDEV","_jsxDEV","Context","mqlDark","window","matchMedia","defaultTheme","matches","useGeneral","_s","GeneralProvider","props","_s2","navOpen","setNavOpen","visibilityState","setVisibilityState","document","osColorScheme","setOsColorScheme","selectedTheme","setSelectedTheme","removeSelectedTheme","theme","addEventListener","e","toggleTheme","value","windowState","isVisible","Provider","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/lijinxing/Documents/hipo-dapp-bamboo/src/layout/components/general-provider/GeneralProvider.jsx"],"sourcesContent":["import { useContext, useState, useEffect, createContext } from \"react\";\nimport { useLocalStorage } from \"react-use-storage\";\nimport { useWindowEventListener } from \"rooks\";\n\nconst Context = createContext();\nconst mqlDark = window.matchMedia('(prefers-color-scheme: dark)');\nconst defaultTheme = mqlDark.matches ? 'dark' : 'light';\n\nexport function useGeneral() {\n    return useContext(Context);\n}\n\nconst GeneralProvider = props => {\n    const [navOpen, setNavOpen] = useState(false);\n    const [visibilityState, setVisibilityState] = useState(window.document.visibilityState);\n    const [osColorScheme, setOsColorScheme] = useState(defaultTheme);\n    const [selectedTheme, setSelectedTheme, removeSelectedTheme] = useLocalStorage('bb_theme', );\n    \n    const theme = selectedTheme || osColorScheme;\n    \n    useWindowEventListener('visibilitychange', () => {\n        setVisibilityState(window.document.visibilityState);        \n    });\n\n    useEffect(() => {\n        setOsColorScheme(defaultTheme);\n\n        mqlDark.addEventListener('change', e => {\n            setOsColorScheme(e.matches ? 'dark' : 'light');\n        });\n    }, []);\n\n    function toggleTheme() {\n        if (selectedTheme === 'light') {\n            setSelectedTheme('dark');\n        } else if (selectedTheme === 'dark') {\n            removeSelectedTheme();\n        } else {\n            selectedTheme('light');\n        }\n    }\n\n    const value = {\n        navOpen,\n        setNavOpen,\n        theme,\n        selectedTheme,\n        toggleTheme,\n        windowState: {\n            visibilityState,\n            isVisible: visibilityState === 'visible',\n        },\n    };\n\n    return (\n        <Context.Provider value = { value }>\n            { props.children }\n        </Context.Provider>\n    )   \n}\n\nexport default GeneralProvider"],"mappings":";;;AAAA,SAASA,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,QAAQ,OAAO;AACtE,SAASC,eAAe,QAAQ,mBAAmB;AACnD,SAASC,sBAAsB,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,OAAO,gBAAGL,aAAa,EAAE;AAC/B,MAAMM,OAAO,GAAGC,MAAM,CAACC,UAAU,CAAC,8BAA8B,CAAC;AACjE,MAAMC,YAAY,GAAGH,OAAO,CAACI,OAAO,GAAG,MAAM,GAAG,OAAO;AAEvD,OAAO,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACzB,OAAOf,UAAU,CAACQ,OAAO,CAAC;AAC9B;AAACO,EAAA,CAFeD,UAAU;AAI1B,MAAME,eAAe,GAAGC,KAAK,IAAI;EAAAC,GAAA;EAC7B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACoB,eAAe,EAAEC,kBAAkB,CAAC,GAAGrB,QAAQ,CAACS,MAAM,CAACa,QAAQ,CAACF,eAAe,CAAC;EACvF,MAAM,CAACG,aAAa,EAAEC,gBAAgB,CAAC,GAAGxB,QAAQ,CAACW,YAAY,CAAC;EAChE,MAAM,CAACc,aAAa,EAAEC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGxB,eAAe,CAAC,UAAU,CAAG;EAE5F,MAAMyB,KAAK,GAAGH,aAAa,IAAIF,aAAa;EAE5CnB,sBAAsB,CAAC,kBAAkB,EAAE,MAAM;IAC7CiB,kBAAkB,CAACZ,MAAM,CAACa,QAAQ,CAACF,eAAe,CAAC;EACvD,CAAC,CAAC;EAEFnB,SAAS,CAAC,MAAM;IACZuB,gBAAgB,CAACb,YAAY,CAAC;IAE9BH,OAAO,CAACqB,gBAAgB,CAAC,QAAQ,EAAEC,CAAC,IAAI;MACpCN,gBAAgB,CAACM,CAAC,CAAClB,OAAO,GAAG,MAAM,GAAG,OAAO,CAAC;IAClD,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,SAASmB,WAAWA,CAAA,EAAG;IACnB,IAAIN,aAAa,KAAK,OAAO,EAAE;MAC3BC,gBAAgB,CAAC,MAAM,CAAC;IAC5B,CAAC,MAAM,IAAID,aAAa,KAAK,MAAM,EAAE;MACjCE,mBAAmB,EAAE;IACzB,CAAC,MAAM;MACHF,aAAa,CAAC,OAAO,CAAC;IAC1B;EACJ;EAEA,MAAMO,KAAK,GAAG;IACVd,OAAO;IACPC,UAAU;IACVS,KAAK;IACLH,aAAa;IACbM,WAAW;IACXE,WAAW,EAAE;MACTb,eAAe;MACfc,SAAS,EAAEd,eAAe,KAAK;IACnC;EACJ,CAAC;EAED,oBACId,OAAA,CAACC,OAAO,CAAC4B,QAAQ;IAACH,KAAK,EAAKA,KAAO;IAAAI,QAAA,EAC7BpB,KAAK,CAACoB;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACD;AAE3B,CAAC;AAAAvB,GAAA,CA/CKF,eAAe;EAAA,QAI8CZ,eAAe,EAI9EC,sBAAsB;AAAA;AAAAqC,EAAA,GARpB1B,eAAe;AAiDrB,eAAeA,eAAe;AAAA,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}