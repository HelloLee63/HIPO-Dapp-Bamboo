{"ast":null,"code":"import { useState, useEffect, useCallback } from \"react\";\nvar IS_BROWSER = typeof window !== \"undefined\" && typeof navigator !== \"undefined\" && typeof document !== \"undefined\";\nvar evtTarget;\ntry {\n  evtTarget = new EventTarget();\n} catch (_unused) {\n  var _ref, _ref$createElement;\n  evtTarget = (_ref = IS_BROWSER ? document : {}) === null || _ref === void 0 ? void 0 : (_ref$createElement = _ref.createElement) === null || _ref$createElement === void 0 ? void 0 : _ref$createElement.call(_ref, \"phony\");\n}\nvar useSSRStorage = () => (_, defaultValue) => [defaultValue];\nvar useStorage = storage => (key, defaultValue) => {\n  var raw = storage.getItem(key);\n  var [value, setValue] = useState(raw ? JSON.parse(raw) : defaultValue);\n  var updater = useCallback(function (updatedValue) {\n    var remove = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    setValue(updatedValue);\n    storage[remove ? \"removeItem\" : \"setItem\"](key, JSON.stringify(updatedValue));\n    evtTarget.dispatchEvent(new CustomEvent(\"storage_change\", {\n      detail: {\n        key\n      }\n    }));\n  }, [key]);\n  defaultValue != null && !raw && updater(defaultValue);\n  useEffect(() => {\n    var listener = _ref2 => {\n      var {\n        detail\n      } = _ref2;\n      if (detail.key === key) {\n        var lraw = storage.getItem(key);\n        lraw !== raw && setValue(JSON.parse(lraw));\n      }\n    };\n    evtTarget.addEventListener(\"storage_change\", listener);\n    return () => evtTarget.removeEventListener(\"storage_change\", listener);\n  });\n  return [value, updater, () => updater(null, true)];\n};\nexport var useLocalStorage = IS_BROWSER ? useStorage(localStorage) : useSSRStorage();\nexport var useSessionStorage = IS_BROWSER ? useStorage(sessionStorage) : useSSRStorage();","map":{"version":3,"names":["useState","useEffect","useCallback","IS_BROWSER","window","navigator","document","evtTarget","EventTarget","_unused","_ref","_ref$createElement","createElement","call","useSSRStorage","_","defaultValue","useStorage","storage","key","raw","getItem","value","setValue","JSON","parse","updater","updatedValue","remove","arguments","length","undefined","stringify","dispatchEvent","CustomEvent","detail","listener","_ref2","lraw","addEventListener","removeEventListener","useLocalStorage","localStorage","useSessionStorage","sessionStorage"],"sources":["/Users/lijinxing/Documents/hipo-dapp-bamboo/node_modules/react-use-storage/lib/esm/index.js"],"sourcesContent":["import{useState,useEffect,useCallback}from\"react\";var IS_BROWSER=typeof window!==\"undefined\"&&typeof navigator!==\"undefined\"&&typeof document!==\"undefined\";var evtTarget;try{evtTarget=new EventTarget();}catch(_unused){var _ref,_ref$createElement;evtTarget=(_ref=IS_BROWSER?document:{})===null||_ref===void 0?void 0:(_ref$createElement=_ref.createElement)===null||_ref$createElement===void 0?void 0:_ref$createElement.call(_ref,\"phony\");}var useSSRStorage=()=>(_,defaultValue)=>[defaultValue];var useStorage=storage=>(key,defaultValue)=>{var raw=storage.getItem(key);var[value,setValue]=useState(raw?JSON.parse(raw):defaultValue);var updater=useCallback(function(updatedValue){var remove=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;setValue(updatedValue);storage[remove?\"removeItem\":\"setItem\"](key,JSON.stringify(updatedValue));evtTarget.dispatchEvent(new CustomEvent(\"storage_change\",{detail:{key}}));},[key]);defaultValue!=null&&!raw&&updater(defaultValue);useEffect(()=>{var listener=_ref2=>{var{detail}=_ref2;if(detail.key===key){var lraw=storage.getItem(key);lraw!==raw&&setValue(JSON.parse(lraw));}};evtTarget.addEventListener(\"storage_change\",listener);return()=>evtTarget.removeEventListener(\"storage_change\",listener);});return[value,updater,()=>updater(null,true)];};export var useLocalStorage=IS_BROWSER?useStorage(localStorage):useSSRStorage();export var useSessionStorage=IS_BROWSER?useStorage(sessionStorage):useSSRStorage();"],"mappings":"AAAA,SAAOA,QAAQ,EAACC,SAAS,EAACC,WAAW,QAAK,OAAO;AAAC,IAAIC,UAAU,GAAC,OAAOC,MAAM,KAAG,WAAW,IAAE,OAAOC,SAAS,KAAG,WAAW,IAAE,OAAOC,QAAQ,KAAG,WAAW;AAAC,IAAIC,SAAS;AAAC,IAAG;EAACA,SAAS,GAAC,IAAIC,WAAW,EAAE;AAAC,CAAC,QAAMC,OAAO,EAAC;EAAC,IAAIC,IAAI,EAACC,kBAAkB;EAACJ,SAAS,GAAC,CAACG,IAAI,GAACP,UAAU,GAACG,QAAQ,GAAC,CAAC,CAAC,MAAI,IAAI,IAAEI,IAAI,KAAG,KAAK,CAAC,GAAC,KAAK,CAAC,GAAC,CAACC,kBAAkB,GAACD,IAAI,CAACE,aAAa,MAAI,IAAI,IAAED,kBAAkB,KAAG,KAAK,CAAC,GAAC,KAAK,CAAC,GAACA,kBAAkB,CAACE,IAAI,CAACH,IAAI,EAAC,OAAO,CAAC;AAAC;AAAC,IAAII,aAAa,GAACA,CAAA,KAAI,CAACC,CAAC,EAACC,YAAY,KAAG,CAACA,YAAY,CAAC;AAAC,IAAIC,UAAU,GAACC,OAAO,IAAE,CAACC,GAAG,EAACH,YAAY,KAAG;EAAC,IAAII,GAAG,GAACF,OAAO,CAACG,OAAO,CAACF,GAAG,CAAC;EAAC,IAAG,CAACG,KAAK,EAACC,QAAQ,CAAC,GAACvB,QAAQ,CAACoB,GAAG,GAACI,IAAI,CAACC,KAAK,CAACL,GAAG,CAAC,GAACJ,YAAY,CAAC;EAAC,IAAIU,OAAO,GAACxB,WAAW,CAAC,UAASyB,YAAY,EAAC;IAAC,IAAIC,MAAM,GAACC,SAAS,CAACC,MAAM,GAAC,CAAC,IAAED,SAAS,CAAC,CAAC,CAAC,KAAGE,SAAS,GAACF,SAAS,CAAC,CAAC,CAAC,GAAC,KAAK;IAACN,QAAQ,CAACI,YAAY,CAAC;IAACT,OAAO,CAACU,MAAM,GAAC,YAAY,GAAC,SAAS,CAAC,CAACT,GAAG,EAACK,IAAI,CAACQ,SAAS,CAACL,YAAY,CAAC,CAAC;IAACpB,SAAS,CAAC0B,aAAa,CAAC,IAAIC,WAAW,CAAC,gBAAgB,EAAC;MAACC,MAAM,EAAC;QAAChB;MAAG;IAAC,CAAC,CAAC,CAAC;EAAC,CAAC,EAAC,CAACA,GAAG,CAAC,CAAC;EAACH,YAAY,IAAE,IAAI,IAAE,CAACI,GAAG,IAAEM,OAAO,CAACV,YAAY,CAAC;EAACf,SAAS,CAAC,MAAI;IAAC,IAAImC,QAAQ,GAACC,KAAK,IAAE;MAAC,IAAG;QAACF;MAAM,CAAC,GAACE,KAAK;MAAC,IAAGF,MAAM,CAAChB,GAAG,KAAGA,GAAG,EAAC;QAAC,IAAImB,IAAI,GAACpB,OAAO,CAACG,OAAO,CAACF,GAAG,CAAC;QAACmB,IAAI,KAAGlB,GAAG,IAAEG,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACa,IAAI,CAAC,CAAC;MAAC;IAAC,CAAC;IAAC/B,SAAS,CAACgC,gBAAgB,CAAC,gBAAgB,EAACH,QAAQ,CAAC;IAAC,OAAM,MAAI7B,SAAS,CAACiC,mBAAmB,CAAC,gBAAgB,EAACJ,QAAQ,CAAC;EAAC,CAAC,CAAC;EAAC,OAAM,CAACd,KAAK,EAACI,OAAO,EAAC,MAAIA,OAAO,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;AAAC,CAAC;AAAC,OAAO,IAAIe,eAAe,GAACtC,UAAU,GAACc,UAAU,CAACyB,YAAY,CAAC,GAAC5B,aAAa,EAAE;AAAC,OAAO,IAAI6B,iBAAiB,GAACxC,UAAU,GAACc,UAAU,CAAC2B,cAAc,CAAC,GAAC9B,aAAa,EAAE"},"metadata":{},"sourceType":"module"}