{"ast":null,"code":"var _jsxFileName = \"/Users/lijinxing/Documents/hipo-dapp-bamboo/src/chain/ChainProvider.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { useSessionStorage } from 'react-use-storage';\nimport { Ethereum } from './chains/mainnet/Ethereum';\nimport { Goerli } from './chains/testnet/Goerli';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/createContext();\nexport function useChain() {\n  _s();\n  return useContext(Context);\n}\n_s(useChain, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst chains = (() => {\n  return [Goerli, Ethereum];\n})();\nconst ChainProvider = props => {\n  _s2();\n  const {\n    children\n  } = props;\n  const [lastChain, setLastChain] = useSessionStorage('last_chain');\n  const initialChain = useMemo(() => {\n    var _chain;\n    let chain;\n    try {\n      if (lastChain) {\n        const chainId = lastChain === null || lastChain === void 0 ? void 0 : lastChain.toLowerCase();\n        chain = chains.find(c => c.id.toLowerCase() === chainId);\n      }\n    } catch {}\n    return (_chain = chain) !== null && _chain !== void 0 ? _chain : chains[0];\n  }, [lastChain]);\n  const [activeChain] = useState(initialChain);\n  const findChain = useCallback(chainId => {\n    return chains.find(c => c.id.toLowerCase() === chainId);\n  }, []);\n  const findChainByChainId = useCallback(chainId => {\n    return chains.find(c => c.meta.chainId === chainId);\n  }, []);\n  const changeChain = useCallback(chainId => {\n    const chain = findChainByChainId(chainId);\n    if (chain) {\n      setLastChain(chain.id.toLowerCase());\n      window.location.reload();\n    }\n    return chain;\n  }, [findChainByChainId, setLastChain]);\n  useEffect(() => {\n    window.document.title = activeChain.config.title;\n  }, [activeChain]);\n  const value = {\n    chains,\n    defaultChain: chains[0],\n    activeChain,\n    findChain,\n    findChainByChainId,\n    changeChain\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s2(ChainProvider, \"1QTUkjJ+yQpXPkiWbPQsC1zRq5Q=\", false, function () {\n  return [useSessionStorage];\n});\n_c = ChainProvider;\nexport default ChainProvider;\nvar _c;\n$RefreshReg$(_c, \"ChainProvider\");","map":{"version":3,"names":["createContext","useCallback","useContext","useEffect","useMemo","useState","useSessionStorage","Ethereum","Goerli","jsxDEV","_jsxDEV","Context","useChain","_s","chains","ChainProvider","props","_s2","children","lastChain","setLastChain","initialChain","_chain","chain","chainId","toLowerCase","find","c","id","activeChain","findChain","findChainByChainId","meta","changeChain","window","location","reload","document","title","config","value","defaultChain","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/lijinxing/Documents/hipo-dapp-bamboo/src/chain/ChainProvider.jsx"],"sourcesContent":["import { createContext, useCallback, useContext, useEffect, useMemo, useState } from 'react'\nimport { useSessionStorage } from 'react-use-storage';\nimport { Ethereum } from './chains/mainnet/Ethereum';\nimport { Goerli } from './chains/testnet/Goerli';\n\nconst Context = createContext();\n\nexport function useChain() {\n  return useContext(Context);\n}\n\nconst chains = (() => {\n  return [\n    Goerli, \n    Ethereum,\n  ];\n})();\n\nconst ChainProvider = props => {\n\n  const { children } = props;\n\n  const [lastChain, setLastChain] = useSessionStorage('last_chain');\n\n  const initialChain = useMemo(() => {\n    let chain\n    try {\n      if(lastChain) {\n        const chainId = lastChain?.toLowerCase();\n        chain = chains.find(c => c.id.toLowerCase() === chainId);\n      }\n    } catch {}\n\n    return chain ?? chains[0];\n  }, [lastChain])\n\n  const [activeChain] = useState(initialChain);\n\n  const findChain = useCallback(\n    (chainId) => {\n      return chains.find(c => c.id.toLowerCase() === chainId);\n    },\n    []\n  )\n\n  const findChainByChainId = useCallback(\n    (chainId) => {\n      return chains.find(c => c.meta.chainId === chainId);\n    },\n    []\n  )\n\n  const changeChain = useCallback(\n    (chainId) => {\n      const chain = findChainByChainId(chainId)\n      if(chain) {\n        setLastChain(chain.id.toLowerCase());\n        window.location.reload();\n      }\n\n      return chain;\n    },\n    [findChainByChainId, setLastChain]\n  )\n\n  useEffect(() => {\n    window.document.title = activeChain.config.title\n  }, [activeChain])\n\n  const value = {\n    chains,\n    defaultChain: chains[0],\n    activeChain,\n    findChain,\n    findChainByChainId,\n    changeChain,\n  }\n\n  return (\n    <Context.Provider value={value}>{ children }</Context.Provider>\n  )\n}\n\nexport default ChainProvider"],"mappings":"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"},"metadata":{},"sourceType":"module"}