{"ast":null,"code":"import { useState, useRef, useCallback, useEffect, useMemo } from 'react';\nimport { useFreshCallback } from './useFreshCallback.js';\n\n/**\r\n * useMouseMoveDelta\r\n * @description Tracks delta of mouse move\r\n * @see {@link https://rooks.vercel.app/docs/useMouseMoveDelta}\r\n */\nconst initialDelta = {\n  deltaX: 0,\n  deltaY: 0,\n  clientX: null,\n  clientY: null,\n  velocityX: 0,\n  velocityY: 0,\n  timeStamp: Date.now()\n};\nfunction useMouseMoveDelta() {\n  const [delta, setDelta] = useState(() => {\n    return Object.assign(Object.assign({}, initialDelta), {\n      timeStamp: Date.now()\n    });\n  });\n  const lastDeltaRef = useRef(null);\n  const handleMouseMove = useCallback(event => {\n    const currentTimestamp = event.timeStamp;\n    const lastDelta = lastDeltaRef.current;\n    if (lastDelta && lastDelta.clientX !== null && lastDelta.clientY !== null) {\n      const deltaX = event.clientX - lastDelta.clientX;\n      const deltaY = event.clientY - lastDelta.clientY;\n      const timeDelta = currentTimestamp - lastDelta.timeStamp;\n      // velocity doesnt make sense if timeDelta is 0 or if lastMousePosition is null\n      // because it means that the mouse has not moved since the last time this callback was called\n      const velocityX = timeDelta === 0 ? 0 : deltaX / timeDelta;\n      const velocityY = timeDelta === 0 ? 0 : deltaY / timeDelta;\n      lastDeltaRef.current = delta;\n      setDelta({\n        deltaX,\n        clientX: event.clientX,\n        clientY: event.clientY,\n        deltaY,\n        velocityX,\n        velocityY,\n        timeStamp: currentTimestamp\n      });\n    } else {\n      // backfill lastMousePosition reasonably\n      lastDeltaRef.current = Object.assign(Object.assign({}, delta), {\n        clientX: event.clientX,\n        clientY: event.clientY,\n        timeStamp: event.timeStamp\n      });\n      setDelta({\n        clientX: event.clientX,\n        clientY: event.clientY,\n        deltaX: 0,\n        deltaY: 0,\n        velocityX: 0,\n        velocityY: 0,\n        timeStamp: event.timeStamp\n      });\n    }\n  }, [delta]);\n  const freshMouseMove = useFreshCallback(handleMouseMove);\n  useEffect(() => {\n    document.addEventListener(\"mousemove\", freshMouseMove, {\n      passive: true\n    });\n    return () => {\n      document.removeEventListener(\"mousemove\", freshMouseMove);\n    };\n  }, [freshMouseMove]);\n  return useMemo(() => {\n    const {\n      deltaX,\n      deltaY,\n      velocityX,\n      velocityY\n    } = delta;\n    return {\n      deltaX,\n      deltaY,\n      velocityX,\n      velocityY\n    };\n  }, [delta]);\n}\nexport { useMouseMoveDelta };","map":{"version":3,"names":["useState","useRef","useCallback","useEffect","useMemo","useFreshCallback","initialDelta","deltaX","deltaY","clientX","clientY","velocityX","velocityY","timeStamp","Date","now","useMouseMoveDelta","delta","setDelta","Object","assign","lastDeltaRef","handleMouseMove","event","currentTimestamp","lastDelta","current","timeDelta","freshMouseMove","document","addEventListener","passive","removeEventListener"],"sources":["/Users/lijinxing/Documents/hipo-dapp-bamboo/node_modules/rooks/dist/esm/hooks/useMouseMoveDelta.js"],"sourcesContent":["import { useState, useRef, useCallback, useEffect, useMemo } from 'react';\nimport { useFreshCallback } from './useFreshCallback.js';\n\n/**\r\n * useMouseMoveDelta\r\n * @description Tracks delta of mouse move\r\n * @see {@link https://rooks.vercel.app/docs/useMouseMoveDelta}\r\n */\r\nconst initialDelta = {\r\n    deltaX: 0,\r\n    deltaY: 0,\r\n    clientX: null,\r\n    clientY: null,\r\n    velocityX: 0,\r\n    velocityY: 0,\r\n    timeStamp: Date.now(),\r\n};\r\nfunction useMouseMoveDelta() {\r\n    const [delta, setDelta] = useState(() => {\r\n        return Object.assign(Object.assign({}, initialDelta), { timeStamp: Date.now() });\r\n    });\r\n    const lastDeltaRef = useRef(null);\r\n    const handleMouseMove = useCallback((event) => {\r\n        const currentTimestamp = event.timeStamp;\r\n        const lastDelta = lastDeltaRef.current;\r\n        if (lastDelta &&\r\n            lastDelta.clientX !== null &&\r\n            lastDelta.clientY !== null) {\r\n            const deltaX = event.clientX - lastDelta.clientX;\r\n            const deltaY = event.clientY - lastDelta.clientY;\r\n            const timeDelta = currentTimestamp - lastDelta.timeStamp;\r\n            // velocity doesnt make sense if timeDelta is 0 or if lastMousePosition is null\r\n            // because it means that the mouse has not moved since the last time this callback was called\r\n            const velocityX = timeDelta === 0 ? 0 : deltaX / timeDelta;\r\n            const velocityY = timeDelta === 0 ? 0 : deltaY / timeDelta;\r\n            lastDeltaRef.current = delta;\r\n            setDelta({\r\n                deltaX,\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                deltaY,\r\n                velocityX,\r\n                velocityY,\r\n                timeStamp: currentTimestamp,\r\n            });\r\n        }\r\n        else {\r\n            // backfill lastMousePosition reasonably\r\n            lastDeltaRef.current = Object.assign(Object.assign({}, delta), { clientX: event.clientX, clientY: event.clientY, timeStamp: event.timeStamp });\r\n            setDelta({\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                deltaX: 0,\r\n                deltaY: 0,\r\n                velocityX: 0,\r\n                velocityY: 0,\r\n                timeStamp: event.timeStamp,\r\n            });\r\n        }\r\n    }, [delta]);\r\n    const freshMouseMove = useFreshCallback(handleMouseMove);\r\n    useEffect(() => {\r\n        document.addEventListener(\"mousemove\", freshMouseMove, {\r\n            passive: true,\r\n        });\r\n        return () => {\r\n            document.removeEventListener(\"mousemove\", freshMouseMove);\r\n        };\r\n    }, [freshMouseMove]);\r\n    return useMemo(() => {\r\n        const { deltaX, deltaY, velocityX, velocityY } = delta;\r\n        return { deltaX, deltaY, velocityX, velocityY };\r\n    }, [delta]);\r\n}\n\nexport { useMouseMoveDelta };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}