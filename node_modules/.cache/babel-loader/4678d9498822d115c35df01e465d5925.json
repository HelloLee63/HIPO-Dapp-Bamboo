{"ast":null,"code":"import { useState, useRef, useCallback, useEffect, useMemo } from 'react';\nimport { useFreshCallback } from './useFreshCallback.js';\n\n/**\r\n * useMouseWheelDelta\r\n * @description Tracks delta of mouse wheel\r\n * @see {@link https://rooks.vercel.app/docs/useMouseWheelDelta}\r\n */\nconst initialDelta = {\n  delta: 0,\n  velocity: 0,\n  timeStamp: Date.now()\n};\nfunction useMouseWheelDelta() {\n  const [deltaState, setDeltaState] = useState(() => {\n    return Object.assign(Object.assign({}, initialDelta), {\n      timeStamp: Date.now()\n    });\n  });\n  const lastDeltaRef = useRef(null);\n  const handleWheel = useCallback(event => {\n    const currentTimestamp = event.timeStamp;\n    const lastDelta = lastDeltaRef.current;\n    if (lastDelta) {\n      const delta = event.deltaY;\n      const timeDelta = currentTimestamp - lastDelta.timeStamp;\n      console.log(timeDelta);\n      const velocity = timeDelta === 0 ? 0 : delta / timeDelta;\n      console.log(\"delta\", delta);\n      console.log(\"timedelta\", timeDelta);\n      console.log(\"velocity\", velocity);\n      lastDeltaRef.current = deltaState;\n      setDeltaState({\n        delta,\n        velocity,\n        timeStamp: currentTimestamp\n      });\n    } else {\n      lastDeltaRef.current = {\n        velocity: 0,\n        delta: 0,\n        timeStamp: event.timeStamp\n      };\n      setDeltaState({\n        delta: event.deltaY,\n        velocity: 0,\n        timeStamp: event.timeStamp\n      });\n    }\n  }, [deltaState]);\n  const freshWheel = useFreshCallback(handleWheel);\n  useEffect(() => {\n    document.addEventListener(\"wheel\", freshWheel);\n    return () => {\n      document.removeEventListener(\"wheel\", freshWheel);\n    };\n  }, [freshWheel]);\n  console.log(deltaState);\n  return useMemo(() => {\n    const {\n      delta,\n      velocity\n    } = deltaState;\n    return {\n      delta,\n      velocity\n    };\n  }, [deltaState]);\n}\nexport { useMouseWheelDelta };","map":{"version":3,"names":["useState","useRef","useCallback","useEffect","useMemo","useFreshCallback","initialDelta","delta","velocity","timeStamp","Date","now","useMouseWheelDelta","deltaState","setDeltaState","Object","assign","lastDeltaRef","handleWheel","event","currentTimestamp","lastDelta","current","deltaY","timeDelta","console","log","freshWheel","document","addEventListener","removeEventListener"],"sources":["/Users/lijinxing/Documents/hipo-dapp-bamboo/node_modules/rooks/dist/esm/hooks/useMouseWheelDelta.js"],"sourcesContent":["import { useState, useRef, useCallback, useEffect, useMemo } from 'react';\nimport { useFreshCallback } from './useFreshCallback.js';\n\n/**\r\n * useMouseWheelDelta\r\n * @description Tracks delta of mouse wheel\r\n * @see {@link https://rooks.vercel.app/docs/useMouseWheelDelta}\r\n */\r\nconst initialDelta = {\r\n    delta: 0,\r\n    velocity: 0,\r\n    timeStamp: Date.now(),\r\n};\r\nfunction useMouseWheelDelta() {\r\n    const [deltaState, setDeltaState] = useState(() => {\r\n        return Object.assign(Object.assign({}, initialDelta), { timeStamp: Date.now() });\r\n    });\r\n    const lastDeltaRef = useRef(null);\r\n    const handleWheel = useCallback((event) => {\r\n        const currentTimestamp = event.timeStamp;\r\n        const lastDelta = lastDeltaRef.current;\r\n        if (lastDelta) {\r\n            const delta = event.deltaY;\r\n            const timeDelta = currentTimestamp - lastDelta.timeStamp;\r\n            console.log(timeDelta);\r\n            const velocity = timeDelta === 0 ? 0 : delta / timeDelta;\r\n            console.log(\"delta\", delta);\r\n            console.log(\"timedelta\", timeDelta);\r\n            console.log(\"velocity\", velocity);\r\n            lastDeltaRef.current = deltaState;\r\n            setDeltaState({\r\n                delta,\r\n                velocity,\r\n                timeStamp: currentTimestamp,\r\n            });\r\n        }\r\n        else {\r\n            lastDeltaRef.current = {\r\n                velocity: 0,\r\n                delta: 0,\r\n                timeStamp: event.timeStamp,\r\n            };\r\n            setDeltaState({\r\n                delta: event.deltaY,\r\n                velocity: 0,\r\n                timeStamp: event.timeStamp,\r\n            });\r\n        }\r\n    }, [deltaState]);\r\n    const freshWheel = useFreshCallback(handleWheel);\r\n    useEffect(() => {\r\n        document.addEventListener(\"wheel\", freshWheel);\r\n        return () => {\r\n            document.removeEventListener(\"wheel\", freshWheel);\r\n        };\r\n    }, [freshWheel]);\r\n    console.log(deltaState);\r\n    return useMemo(() => {\r\n        const { delta, velocity } = deltaState;\r\n        return { delta, velocity };\r\n    }, [deltaState]);\r\n}\n\nexport { useMouseWheelDelta };\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AACzE,SAASC,gBAAgB,QAAQ,uBAAuB;;AAExD;AACA;AACA;AACA;AACA;AACA,MAAMC,YAAY,GAAG;EACjBC,KAAK,EAAE,CAAC;EACRC,QAAQ,EAAE,CAAC;EACXC,SAAS,EAAEC,IAAI,CAACC,GAAG;AACvB,CAAC;AACD,SAASC,kBAAkBA,CAAA,EAAG;EAC1B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,MAAM;IAC/C,OAAOe,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEV,YAAY,CAAC,EAAE;MAAEG,SAAS,EAAEC,IAAI,CAACC,GAAG;IAAG,CAAC,CAAC;EACpF,CAAC,CAAC;EACF,MAAMM,YAAY,GAAGhB,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMiB,WAAW,GAAGhB,WAAW,CAAEiB,KAAK,IAAK;IACvC,MAAMC,gBAAgB,GAAGD,KAAK,CAACV,SAAS;IACxC,MAAMY,SAAS,GAAGJ,YAAY,CAACK,OAAO;IACtC,IAAID,SAAS,EAAE;MACX,MAAMd,KAAK,GAAGY,KAAK,CAACI,MAAM;MAC1B,MAAMC,SAAS,GAAGJ,gBAAgB,GAAGC,SAAS,CAACZ,SAAS;MACxDgB,OAAO,CAACC,GAAG,CAACF,SAAS,CAAC;MACtB,MAAMhB,QAAQ,GAAGgB,SAAS,KAAK,CAAC,GAAG,CAAC,GAAGjB,KAAK,GAAGiB,SAAS;MACxDC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEnB,KAAK,CAAC;MAC3BkB,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEF,SAAS,CAAC;MACnCC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAElB,QAAQ,CAAC;MACjCS,YAAY,CAACK,OAAO,GAAGT,UAAU;MACjCC,aAAa,CAAC;QACVP,KAAK;QACLC,QAAQ;QACRC,SAAS,EAAEW;MACf,CAAC,CAAC;IACN,CAAC,MACI;MACDH,YAAY,CAACK,OAAO,GAAG;QACnBd,QAAQ,EAAE,CAAC;QACXD,KAAK,EAAE,CAAC;QACRE,SAAS,EAAEU,KAAK,CAACV;MACrB,CAAC;MACDK,aAAa,CAAC;QACVP,KAAK,EAAEY,KAAK,CAACI,MAAM;QACnBf,QAAQ,EAAE,CAAC;QACXC,SAAS,EAAEU,KAAK,CAACV;MACrB,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAACI,UAAU,CAAC,CAAC;EAChB,MAAMc,UAAU,GAAGtB,gBAAgB,CAACa,WAAW,CAAC;EAChDf,SAAS,CAAC,MAAM;IACZyB,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEF,UAAU,CAAC;IAC9C,OAAO,MAAM;MACTC,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEH,UAAU,CAAC;IACrD,CAAC;EACL,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAChBF,OAAO,CAACC,GAAG,CAACb,UAAU,CAAC;EACvB,OAAOT,OAAO,CAAC,MAAM;IACjB,MAAM;MAAEG,KAAK;MAAEC;IAAS,CAAC,GAAGK,UAAU;IACtC,OAAO;MAAEN,KAAK;MAAEC;IAAS,CAAC;EAC9B,CAAC,EAAE,CAACK,UAAU,CAAC,CAAC;AACpB;AAEA,SAASD,kBAAkB"},"metadata":{},"sourceType":"module"}